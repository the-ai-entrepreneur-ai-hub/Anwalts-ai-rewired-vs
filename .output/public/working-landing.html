<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ANWALTS.AI - KI f√ºr Anw√§lte</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .glassmorphism {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            box-shadow: 0 8px 32px rgba(31, 38, 135, 0.37);
        }
        
        .glass-button {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            transition: all 0.3s ease;
        }
        
        .glass-button:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }
    </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900">
    <!-- Animated background elements -->
    <div class="absolute inset-0">
        <div class="absolute top-1/4 left-1/4 w-96 h-96 bg-blue-500/20 rounded-full blur-3xl animate-pulse"></div>
        <div class="absolute bottom-1/4 right-1/4 w-80 h-80 bg-purple-500/20 rounded-full blur-3xl animate-pulse"></div>
    </div>
    
    <!-- Content -->
    <div class="relative z-10 container mx-auto px-4 py-20">
        <!-- Header -->
        <header class="fixed top-0 left-0 right-0 z-50 bg-white/10 backdrop-blur-md border-b border-white/20">
            <div class="container mx-auto px-4 py-4 flex items-center justify-between">
                <div class="text-2xl font-bold text-white">ANWALTS.AI</div>
                <nav class="hidden md:flex space-x-8">
                    <a href="/dashboard" class="text-white/80 hover:text-white transition-colors">Dashboard</a>
                    <a href="/dashboard/research" class="text-white/80 hover:text-white transition-colors">Fragen</a>
                    <a href="/dashboard/cases" class="text-white/80 hover:text-white transition-colors">Kundenberichte</a>
                </nav>
                <button onclick="openAuthModal()" class="bg-gradient-to-r from-blue-600 to-purple-600 text-white px-6 py-2 rounded-lg font-semibold hover:from-blue-700 hover:to-purple-700 transition-all shadow-lg">
                    Registrieren
                </button>
            </div>
        </header>

        <!-- Hero section -->
        <div class="pt-32 text-center">
            <h1 class="text-6xl md:text-8xl font-bold text-white mb-6 tracking-tight">
                ANWALTS.AI
            </h1>
            <p class="text-xl md:text-2xl text-white/80 mb-12 max-w-3xl mx-auto">
                KI-gest√ºtzte Rechtsl√∂sungen f√ºr die moderne Anwaltskanzlei
            </p>
            
            <!-- CTA Buttons -->
            <div class="flex flex-col sm:flex-row gap-4 justify-center items-center mb-20">
                <button onclick="openAuthModal()" class="glass-button px-12 py-4 rounded-xl font-semibold text-lg">
                    Kostenlos registrieren
                </button>
                <a href="/dashboard" class="border-2 border-white/50 text-white px-12 py-4 rounded-xl font-semibold hover:bg-white hover:text-blue-600 transition-all text-lg">
                    Zum Dashboard
                </a>
            </div>

            <!-- Features -->
            <div class="grid md:grid-cols-3 gap-8 max-w-5xl mx-auto">
                <div class="glassmorphism p-8">
                    <div class="text-4xl mb-4">‚öñÔ∏è</div>
                    <h3 class="text-xl font-semibold text-white mb-3">Rechtsprechung</h3>
                    <p class="text-white/80">KI-gest√ºtzte Suche durch Rechtsdatenbanken und Fallrecht</p>
                </div>
                
                <div class="glassmorphism p-8">
                    <div class="text-4xl mb-4">üìÑ</div>
                    <h3 class="text-xl font-semibold text-white mb-3">Dokumentenanalyse</h3>
                    <p class="text-white/80">Intelligente Dokumentenpr√ºfung und Vertragsanalyse</p>
                </div>
                
                <div class="glassmorphism p-8">
                    <div class="text-4xl mb-4">ü§ñ</div>
                    <h3 class="text-xl font-semibold text-white mb-3">KI-Assistent</h3>
                    <p class="text-white/80">24/7 KI-Assistent f√ºr juristische Fragen und Beratung</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Enhanced Authentication Modal -->
    <div id="authModal" class="fixed inset-0 z-50 hidden items-center justify-center p-4" style="background: linear-gradient(135deg, rgba(15, 23, 42, 0.8), rgba(30, 58, 138, 0.6), rgba(15, 23, 42, 0.9)); backdrop-filter: blur(20px);">
        <div class="glassmorphism w-full max-w-lg p-8" style="background: rgba(15, 23, 42, 0.95); border: 1px solid rgba(255, 255, 255, 0.1); box-shadow: 0 32px 80px rgba(0, 0, 0, 0.4), 0 16px 32px rgba(30, 58, 138, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.1);">
            <div class="relative">
                <!-- Close button -->
                <button onclick="closeAuthModal()" class="absolute -top-2 -right-2 w-10 h-10 bg-white/10 backdrop-blur-sm rounded-full flex items-center justify-center text-white/80 hover:text-white hover:bg-white/20 border border-white/20 transition-all hover:scale-105">
                    ‚úï
                </button>

                <!-- Modal header -->
                <div class="text-center mb-8">
                    <h2 id="modalTitle" class="text-3xl font-bold text-white mb-2" style="background: linear-gradient(135deg, #ffffff, #e2e8f0); background-clip: text; -webkit-background-clip: text; -webkit-text-fill-color: transparent;">Anmelden</h2>
                    <p id="modalSubtitle" class="text-white/70">Melden Sie sich in Ihrem Account an</p>
                </div>

                <!-- Google Login Button -->
                <div class="mb-6">
                    <button onclick="handleGoogleAuth()" class="w-full flex items-center justify-center gap-3 p-4 bg-white/10 backdrop-blur-sm border border-white/20 rounded-xl text-white font-medium hover:bg-white/20 hover:border-white/30 transition-all hover:transform hover:-translate-y-1" style="box-shadow: 0 8px 24px rgba(91, 124, 230, 0.15);">
                        <svg width="20" height="20" viewBox="0 0 24 24">
                            <path fill="#4285f4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
                            <path fill="#34a853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
                            <path fill="#fbbc05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
                            <path fill="#ea4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
                        </svg>
                        <span id="googleButtonText">Mit Google anmelden</span>
                    </button>
                </div>

                <!-- Divider -->
                <div class="flex items-center my-6">
                    <div class="flex-1 h-px bg-gradient-to-r from-transparent via-white/20 to-transparent"></div>
                    <span class="px-4 text-white/60 text-sm bg-slate-900/80 backdrop-blur-sm rounded-full py-1 border border-white/10">oder mit E-Mail</span>
                    <div class="flex-1 h-px bg-gradient-to-r from-transparent via-white/20 to-transparent"></div>
                </div>

                <!-- Authentication Form -->
                <form id="authForm" onsubmit="handleAuth(event)" class="space-y-4">
                    <!-- Registration fields (hidden for login) -->
                    <div id="registrationFields" style="display: none;">
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="block text-white/90 text-sm font-medium mb-2">Vorname *</label>
                                <input id="firstName" type="text" placeholder="Max" class="glass-button w-full p-3 rounded-xl text-white placeholder-white/50" style="background: rgba(255, 255, 255, 0.08); border: 1px solid rgba(255, 255, 255, 0.15);">
                            </div>
                            <div>
                                <label class="block text-white/90 text-sm font-medium mb-2">Nachname *</label>
                                <input id="lastName" type="text" placeholder="M√ºller" class="glass-button w-full p-3 rounded-xl text-white placeholder-white/50" style="background: rgba(255, 255, 255, 0.08); border: 1px solid rgba(255, 255, 255, 0.15);">
                            </div>
                        </div>
                        <div>
                            <label class="block text-white/90 text-sm font-medium mb-2">Telefon *</label>
                            <input id="phone" type="tel" placeholder="+49 170 1234567" class="glass-button w-full p-3 rounded-xl text-white placeholder-white/50" style="background: rgba(255, 255, 255, 0.08); border: 1px solid rgba(255, 255, 255, 0.15);">
                        </div>
                        <div>
                            <label class="block text-white/90 text-sm font-medium mb-2">Kanzlei/Firma</label>
                            <input id="company" type="text" placeholder="Mustermann & Partner" class="glass-button w-full p-3 rounded-xl text-white placeholder-white/50" style="background: rgba(255, 255, 255, 0.08); border: 1px solid rgba(255, 255, 255, 0.15);">
                        </div>
                    </div>

                    <!-- Email field -->
                    <div>
                        <label class="block text-white/90 text-sm font-medium mb-2">E-Mail-Adresse *</label>
                        <input id="email" type="email" placeholder="ihre@kanzlei.de" class="glass-button w-full p-3 rounded-xl text-white placeholder-white/50" style="background: rgba(255, 255, 255, 0.08); border: 1px solid rgba(255, 255, 255, 0.15); box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.2);" required>
                    </div>

                    <!-- Password field -->
                    <div>
                        <label class="block text-white/90 text-sm font-medium mb-2">Passwort *</label>
                        <div class="relative">
                            <input id="password" type="password" placeholder="Mindestens 8 Zeichen" class="glass-button w-full p-3 pr-12 rounded-xl text-white placeholder-white/50" style="background: rgba(255, 255, 255, 0.08); border: 1px solid rgba(255, 255, 255, 0.15); box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.2);" required>
                            <button type="button" onclick="togglePassword()" class="absolute right-3 top-1/2 -translate-y-1/2 text-white/60 hover:text-white/90 transition-colors">
                                <svg id="eyeIcon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                    <path d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                    <path d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path>
                                </svg>
                            </button>
                        </div>
                        <div id="registrationHint" class="mt-1 text-white/50 text-xs" style="display: none;">Mindestens 8 Zeichen f√ºr mehr Sicherheit</div>
                    </div>

                    <!-- Confirm password (registration only) -->
                    <div id="confirmPasswordField" style="display: none;">
                        <label class="block text-white/90 text-sm font-medium mb-2">Passwort best√§tigen *</label>
                        <input id="confirmPassword" type="password" placeholder="Passwort best√§tigen" class="glass-button w-full p-3 rounded-xl text-white placeholder-white/50" style="background: rgba(255, 255, 255, 0.08); border: 1px solid rgba(255, 255, 255, 0.15);">
                    </div>

                    <!-- Terms acceptance (registration only) -->
                    <div id="termsField" style="display: none;" class="flex items-start gap-3 p-4 bg-white/5 rounded-xl border border-white/10">
                        <input id="acceptTerms" type="checkbox" class="mt-1" style="accent-color: #5b7ce6;">
                        <label for="acceptTerms" class="text-sm text-white/80 leading-relaxed">
                            Ich akzeptiere die <a href="/terms" class="text-blue-300 hover:text-blue-200 underline">AGB</a> und <a href="/privacy" class="text-blue-300 hover:text-blue-200 underline">Datenschutzerkl√§rung</a>
                        </label>
                    </div>

                    <!-- Submit button -->
                    <button type="submit" id="submitButton" class="w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white p-4 rounded-xl font-semibold hover:from-blue-700 hover:to-purple-700 transition-all transform hover:-translate-y-1" style="box-shadow: 0 8px 24px rgba(91, 124, 230, 0.25), inset 0 1px 0 rgba(255, 255, 255, 0.2);">
                        <span id="submitText">Anmelden</span>
                        <div id="loadingSpinner" style="display: none;" class="inline-block w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin ml-2"></div>
                    </button>
                </form>

                <!-- Toggle between login/register -->
                <div class="mt-6 text-center">
                    <p class="text-white/60 text-sm">
                        <span id="toggleText">Noch kein Konto?</span>
                        <button type="button" onclick="toggleAuthMode()" id="toggleButton" class="text-blue-300 hover:text-blue-200 font-medium ml-2 underline">
                            Jetzt registrieren
                        </button>
                    </p>
                </div>
            </div>
        </div>
    </div>

    <script>
        console.log('Working landing page loaded successfully');

        function openAuthModal() {
            console.log('Opening enhanced auth modal');
            const modal = document.getElementById('authModal');
            modal.classList.remove('hidden');
            modal.classList.add('flex');
            
            // Focus on email field after modal opens
            setTimeout(() => {
                const emailField = document.getElementById('email');
                if (emailField) emailField.focus();
            }, 300);
        }

        function closeAuthModal() {
            console.log('Closing auth modal');
            const modal = document.getElementById('authModal');
            modal.classList.add('hidden');
            modal.classList.remove('flex');
            
            // Reset form
            const authForm = document.getElementById('authForm');
            if (authForm) authForm.reset();
            
            // Reset to login mode
            if (isRegistrationMode) {
                toggleAuthMode();
            }
        }

        let isRegistrationMode = false;

        function toggleAuthMode() {
            isRegistrationMode = !isRegistrationMode;
            
            // Update modal content based on mode
            const modalTitle = document.getElementById('modalTitle');
            const modalSubtitle = document.getElementById('modalSubtitle');
            const submitText = document.getElementById('submitText');
            const toggleText = document.getElementById('toggleText');
            const toggleButton = document.getElementById('toggleButton');
            const googleButtonText = document.getElementById('googleButtonText');
            
            const registrationFields = document.getElementById('registrationFields');
            const confirmPasswordField = document.getElementById('confirmPasswordField');
            const termsField = document.getElementById('termsField');
            const registrationHint = document.getElementById('registrationHint');
            
            if (isRegistrationMode) {
                // Switch to registration mode
                modalTitle.textContent = 'Registrieren';
                modalSubtitle.textContent = 'Erstellen Sie Ihren kostenlosen Account';
                submitText.textContent = 'Registrieren';
                toggleText.textContent = 'Bereits ein Konto?';
                toggleButton.textContent = 'Jetzt anmelden';
                googleButtonText.textContent = 'Mit Google registrieren';
                
                registrationFields.style.display = 'block';
                confirmPasswordField.style.display = 'block';
                termsField.style.display = 'block';
                registrationHint.style.display = 'block';
            } else {
                // Switch to login mode
                modalTitle.textContent = 'Anmelden';
                modalSubtitle.textContent = 'Melden Sie sich in Ihrem Account an';
                submitText.textContent = 'Anmelden';
                toggleText.textContent = 'Noch kein Konto?';
                toggleButton.textContent = 'Jetzt registrieren';
                googleButtonText.textContent = 'Mit Google anmelden';
                
                registrationFields.style.display = 'none';
                confirmPasswordField.style.display = 'none';
                termsField.style.display = 'none';
                registrationHint.style.display = 'none';
            }
        }

        function togglePassword() {
            const passwordField = document.getElementById('password');
            const eyeIcon = document.getElementById('eyeIcon');
            
            if (passwordField.type === 'password') {
                passwordField.type = 'text';
                eyeIcon.innerHTML = '<path d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L6.464 6.464M18.364 18.364L21 21m-6-6l6 6m-6-6l-3.464-3.464m0 0L7.929 7.929"></path>';
            } else {
                passwordField.type = 'password';
                eyeIcon.innerHTML = '<path d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path>';
            }
        }

        function handleGoogleAuth() {
            console.log('Initiating Google OAuth');
            window.location.href = '/api/auth/google';
        }

        function validateForm() {
            const email = document.getElementById('email').value.trim();
            const password = document.getElementById('password').value;
            
            if (!email || !email.includes('@')) {
                alert('Bitte geben Sie eine g√ºltige E-Mail-Adresse ein.');
                return false;
            }
            
            if (!password || password.length < 8) {
                alert('Passwort muss mindestens 8 Zeichen lang sein.');
                return false;
            }
            
            if (isRegistrationMode) {
                const firstName = document.getElementById('firstName').value.trim();
                const lastName = document.getElementById('lastName').value.trim();
                const phone = document.getElementById('phone').value.trim();
                const confirmPassword = document.getElementById('confirmPassword').value;
                const acceptTerms = document.getElementById('acceptTerms').checked;
                
                if (!firstName || !lastName) {
                    alert('Bitte geben Sie Vor- und Nachname ein.');
                    return false;
                }
                
                if (!phone) {
                    alert('Bitte geben Sie Ihre Telefonnummer ein.');
                    return false;
                }
                
                if (password !== confirmPassword) {
                    alert('Passw√∂rter stimmen nicht √ºberein.');
                    return false;
                }
                
                if (!acceptTerms) {
                    alert('Bitte akzeptieren Sie die AGB und Datenschutzerkl√§rung.');
                    return false;
                }
            }
            
            return true;
        }

        async function handleAuth(event) {
            event.preventDefault();
            
            if (!validateForm()) return;
            
            const submitButton = document.getElementById('submitButton');
            const submitText = document.getElementById('submitText');
            const loadingSpinner = document.getElementById('loadingSpinner');
            
            // Show loading state
            submitButton.disabled = true;
            submitText.style.display = 'none';
            loadingSpinner.style.display = 'inline-block';
            
            try {
                console.log(isRegistrationMode ? 'Processing registration...' : 'Processing login...');
                
                // For demo purposes, simulate successful auth
                await new Promise(resolve => setTimeout(resolve, 1000));
                
                console.log('Authentication successful');
                closeAuthModal();
                window.location.href = '/dashboard';
                
            } catch (error) {
                console.error('Authentication error:', error);
                alert('Es ist ein Fehler aufgetreten. Bitte versuchen Sie es erneut.');
            } finally {
                // Reset loading state
                submitButton.disabled = false;
                submitText.style.display = 'inline';
                loadingSpinner.style.display = 'none';
            }
        }

        // Legacy functions for compatibility
        function handleSignUp(event) {
            return handleAuth(event);
        }

        function switchToSignIn() {
            if (isRegistrationMode) {
                toggleAuthMode();
            }
        }

        // Initialize on DOM load
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Enhanced ANWALTS.AI landing page loaded successfully');
            
            // Focus on email field when modal opens
            const originalOpenModal = openAuthModal;
            window.openAuthModal = function() {
                originalOpenModal();
                setTimeout(() => {
                    const emailField = document.getElementById('email');
                    if (emailField) emailField.focus();
                }, 300);
            };
        });
    </script>
</body>
</html>
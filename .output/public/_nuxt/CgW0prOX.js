import{f as se,x as re,c as ie,h as oe,o as ae}from"./CPsguSRV.js";function te(y={}){const L=y.overlayId||"tourOverlay",i=y.stepId||"tourStep",l=y.contentId||"tourContent",j=y.prevId||"tourPrev",C=y.nextId||"tourNext",$=y.closeId||"tourClose",w=y.neverId||"tourNever",D=y.storageKey||"tourDismissed",u={idx:0,steps:[]},h=a=>document.getElementById(a),k=a=>document.querySelector(a);function x(a){u.steps=Array.isArray(a)?a.slice():[]}function R(){try{return localStorage.getItem(D)==="1"}catch{return!1}}function H(){try{localStorage.setItem(D,"1")}catch{}}function S(){const a=h(L),r=h(i),P=h(l),A=u.steps[u.idx],B=A?k(A.sel):null;if(!(!a||!r||!P)){try{a.parentElement!==document.body&&document.body.appendChild(a),r.parentElement!==document.body&&document.body.appendChild(r)}catch{}if(a.style.display="block",r.classList.remove("hidden"),P.innerHTML=A?.text||"",r.style.position="absolute",r.style.transform="none",r.style.right="auto",r.style.bottom="auto",B){const I=B.getBoundingClientRect();let o=window.scrollY+I.top+I.height+12,g=window.scrollX+I.left;const T=window.scrollX+window.innerWidth-340;if(g>T&&(g=T),!isFinite(o)||!isFinite(g)){const M=r.offsetWidth||320,V=r.offsetHeight||200;g=Math.max(12,window.scrollX+(window.innerWidth-M)/2),o=Math.max(12,window.scrollY+(window.innerHeight-V)/2)}r.style.left=g+"px",r.style.top=o+"px"}else{const I=r.offsetWidth||320,o=r.offsetHeight||200,g=Math.max(12,window.scrollX+(window.innerWidth-I)/2),T=Math.max(12,window.scrollY+(window.innerHeight-o)/2);r.style.left=g+"px",r.style.top=T+"px"}}}function m(){const a=h(L),r=h(i);a&&(a.style.display="none"),r?.classList.add("hidden")}function E(){u.idx=0;const a=h(C);a&&(a.textContent="Weiter"),S()}function b(){h(j)?.addEventListener("click",()=>{u.idx=Math.max(0,u.idx-1),S()}),h(C)?.addEventListener("click",()=>{if(u.idx=Math.min(u.steps.length-1,u.idx+1),S(),u.idx===u.steps.length-1){const a=h(C);a&&(a.textContent="Fertig"),a?.addEventListener("click",m,{once:!0})}}),h($)?.addEventListener("click",m),h(w)?.addEventListener("click",()=>{H(),m()})}return{state:u,setSteps:x,startTour:E,endTour:m,placeStep:S,isDismissed:R,dismiss:H,attachDefaultHandlers:b}}const le={__name:"documents",setup(y){return se(()=>{const L=(e,t=document)=>Array.from(t.querySelectorAll(e)),{public:{apiBase:i="",apiEndpoints:l={}}}=re();try{const e=te({storageKey:"docsTourDismissed"});e.setSteps([{sel:"#docType",text:"<b>Dokumenttyp</b><br/>Wählen oder benennen Sie den gewünschten Dokumenttyp."},{sel:"#requirements",text:"<b>Sachverhalt & Anforderungen</b><br/>Beschreiben Sie kurz den Fall und Vorgaben."},{sel:"#btnGenerate",text:"<b>Generieren</b><br/>Erstellt einen ersten Entwurf basierend auf Ihren Angaben."},{sel:"#previewContainer",text:"<b>Ergebnisbereich</b><br/>Hier erscheint das generierte Dokument mit Vorschau, Aktionen und Export."}]),e.attachDefaultHandlers(),document.addEventListener("click",t=>{t.target instanceof Element&&t.target.closest("#btnHelp")&&(t.preventDefault?.(),e.startTour())},{capture:!0})}catch(e){console.warn("Docs tour init failed:",e)}const j="/api/auth/proxy",C="/api/auth/proxy",$="/api/auth/proxy-upload",w={generate:l.generate||(i?`${i}/ai/generate-document`:""),generateSimple:i?`${i}/ai/generate-document-simple`:"",templates:l.templates||(i?`${i}/templates`:""),upload:l.upload||"",save:l.save||"",exportBase:l.exportBase||"",status:l.status||""};function D(){try{let e=localStorage.getItem("token")||localStorage.getItem("access_token")||localStorage.getItem("sat")||localStorage.getItem("anwalts_auth_token");if(!e&&document&&document.cookie){const t=Object.fromEntries(document.cookie.split(";").map(n=>{const s=n.indexOf("="),d=decodeURIComponent(n.slice(0,s).trim()),v=decodeURIComponent(n.slice(s+1));return[d,v]}));e=t.token||t.access_token||t.sat||t.auth_token}return e?{Authorization:`Bearer ${decodeURIComponent(e)}`}:{}}catch{return{}}}async function u(e,t){const n=await fetch(j,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:e,method:"POST",body:t})});if(!n.ok)throw new Error(`HTTP ${n.status}`);return n}async function h(e){const t=C+"?path="+encodeURIComponent(e),n=await fetch(t,{credentials:"include"});if(!n.ok)throw new Error(`HTTP ${n.status}`);return n}let k=[{id:"nda",title:"NDA – Standard (DE)",category:"Vertrag",docType:"Geheimhaltungsvereinbarung (NDA)",prompt:"Parteien, Zweck, Laufzeit, Vertragsstrafe, Gerichtsstand",body:`
<h2>Geheimhaltungsvereinbarung (NDA)</h2>
<p>zwischen <strong>[PARTEI A]</strong>, [ADRESSE A], und <strong>[PARTEI B]</strong>, [ADRESSE B] (zusammen die "Parteien").</p>
<h3>§ 1 Gegenstand</h3>
<p>Die Parteien beabsichtigen, Informationen zum Zweck <strong>[ZWECK]</strong> auszutauschen. "Vertrauliche Informationen" sind alle nicht öffentlichen Informationen, gleich in welcher Form.</p>
<h3>§ 2 Pflichten</h3>
<p>Empfangende Partei: (a) nutzt Informationen nur zu dem genannten Zweck, (b) wahrt Vertraulichkeit mindestens mit derselben Sorgfalt wie eigene Informationen, (c) gibt sie nur an <strong>[KREIS DER EMPFÄNGER]</strong> weiter.</p>
<h3>§ 3 Laufzeit</h3>
<p>Diese Vereinbarung gilt ab Unterzeichnung für <strong>[LAUFZEIT]</strong>.</p>
<h3>§ 4 Vertragsstrafe</h3>
<p>Bei schuldhaftem Verstoß schuldet die verletzende Partei eine angemessene Vertragsstrafe <strong>[VERTRAGSSTRAFE]</strong>.</p>
<h3>§ 5 Rückgabe</h3>
<p>Auf Verlangen sind Kopien und Unterlagen unverzüglich zurückzugeben oder zu löschen.</p>
<h3>§ 6 Schlussbestimmungen</h3>
<p>Gerichtsstand: <strong>[GERICHTSSTAND]</strong>. Anwendbares Recht: <strong>[RECHT]</strong>. Änderungen bedürfen der Schriftform.</p>
<p>Ort/Datum: [ORT], [DATUM] – Unterschriften: [PARTEI A], [PARTEI B]</p>`},{id:"klage",title:"Klageentwurf – Zivil",category:"Zivil",docType:"Klageentwurf (Zivilrecht)",prompt:"Parteien, Anspruch, Streitwert, Beweismittel, Anträge",body:`
<h2>Klage</h2>
<p>des Klägers <strong>[KLÄGER]</strong>, gegen den Beklagten <strong>[BEKLAGTER]</strong>.</p>
<h3>I. Zuständigkeit</h3>
<p>Sachliche und örtliche Zuständigkeit: <strong>[ZUSTÄNDIGKEIT]</strong>.</p>
<h3>II. Sachverhalt</h3>
<p>[SACHVERHALT – CHRONOLOGIE]</p>
<h3>III. Rechtliche Würdigung</h3>
<p>Anspruchsgrundlagen: <strong>[ANSPRÜCHE]</strong>. Der Anspruch ist begründet, weil …</p>
<h3>IV. Beweismittel</h3>
<p>[BEWEISMITTEL (Urkunden, Zeugen, Sachverständige)]</p>
<h3>V. Anträge</h3>
<p>1. Der Beklagte wird verurteilt, an den Kläger <strong>[BETRAG]</strong> zu zahlen.<br>2. Hilfsweise: <strong>[HILFSANTRAG]</strong>.</p>
<p>Streitwert: <strong>[STREITWERT]</strong>. Datum/Unterschrift.</p>`},{id:"abmahnung",title:"Abmahnung – UWG",category:"Wettbewerb",docType:"Abmahnung (UWG)",prompt:"Adressat, Verstoß, Unterlassung, Frist, Vertragsstrafe",body:`
<h2>Abmahnung</h2>
<p>Adressat: <strong>[UNTERNEHMEN]</strong>, <strong>[ANSCHRIFT]</strong>.</p>
<p>Sie bewerben/verwenden <strong>[VERSTOSS]</strong> und verstoßen damit gegen <strong>[RECHTSNORM]</strong>.</p>
<h3>Forderungen</h3>
<ol>
<li>Abgabe einer strafbewehrten Unterlassungserklärung (Vertragsstrafe: <strong>[STRAFE]</strong>).</li>
<li>Auskunft über Umfang der Handlung.</li>
<li>Kostenersatz nach RVG aus <strong>[GEGENSTANDSWERT]</strong>.</li>
</ol>
<p>Frist: <strong>[FRIST]</strong>. Andernfalls gerichtliche Schritte.</p>`},{id:"vergleich",title:"Vergleichsangebot",category:"Zivil",docType:"Vergleichsangebot",prompt:"Zahlung, Bedingungen, Verzicht, Vertraulichkeit, Datum",body:`
<h2>Vergleichsangebot</h2>
<p>Zwischen <strong>[PARTEI A]</strong> und <strong>[PARTEI B]</strong>.</p>
<h3>1. Leistung</h3>
<p>[PARTEI A] zahlt an [PARTEI B] <strong>[BETRAG]</strong> bis <strong>[FÄLLIGKEIT]</strong>.</p>
<h3>2. Gegenseitiger Verzicht</h3>
<p>Mit Erfüllung sind sämtliche Ansprüche erledigt.</p>
<h3>3. Vertraulichkeit</h3>
<p>Inhalt dieses Vergleichs ist vertraulich.</p>
<h3>4. Schluss</h3>
<p>Gerichtsstand <strong>[GERICHTSSTAND]</strong>. Datum/Unterschrift.</p>`}],x=null;function R(e){const t=document.getElementById("tplGrid");t&&(t.innerHTML="",e.forEach(n=>{const s=document.createElement("div");s.className="p-4 rounded-lg bg-gray-50 border border-gray-200 flex flex-col",s.innerHTML=`
        <div class="flex items-start justify-between gap-3">
          <div>
            <div class="font-medium text-gray-900">${n.title}</div>
            <div class="text-xs text-gray-500">${n.prompt}</div>
          </div>
          <span class="inline-block px-2 py-1 rounded-full text-xs bg-[rgba(91,124,230,0.12)] text-[color:var(--primary)]">${n.category}</span>
        </div>
        <div class="mt-3 flex items-center gap-2">
          <button class="btn-primary px-3 py-2 rounded-md text-sm" data-apply="${n.id}">Übernehmen</button>
          <button class="btn-secondary px-3 py-2 rounded-md text-sm" data-preview="${n.id}">Vorschau</button>
        </div>`,t.appendChild(s)}),t.querySelectorAll("[data-apply]").forEach(n=>n.addEventListener("click",s=>{const d=s.currentTarget.getAttribute("data-apply"),v=k.find(p=>p.id===d);S(v);try{localStorage.setItem("anwalt.templateId",d)}catch{}document.getElementById("tplModal")?.classList.remove("open")})),t.querySelectorAll("[data-preview]").forEach(n=>n.addEventListener("click",s=>{const d=s.currentTarget.getAttribute("data-preview");k.find(v=>v.id===d)})))}function H(e){const t=document.getElementById("preview"),n=document.getElementById("wordCount");if(!t)return;t.innerHTML=e.split(`
`).join("<br/>");const s=t.innerText.trim(),d=s?s.split(/[ \t\r\n]+/).filter(Boolean).length:0;n&&(n.textContent=d+" Wörter")}function S(e){x=e;const t=document.getElementById("docType"),n=document.getElementById("requirements");t&&(t.value=e.docType),n&&(n.value=`• Bitte Platzhalter ersetzen: [ … ]
• ${e.prompt}`,n.dispatchEvent(new Event("input"))),document.getElementById("actionBar")?.classList.add("hidden")}const m=document.getElementById("dropzone"),E=document.getElementById("fileInput"),b=document.getElementById("uploadInfo");m?.addEventListener("click",()=>E?.click()),m?.addEventListener("dragover",e=>{e.preventDefault(),m.classList.add("dragover")}),m?.addEventListener("dragleave",()=>m.classList.remove("dragover")),m?.addEventListener("drop",e=>{e.preventDefault(),m.classList.remove("dragover"),e.dataTransfer.files&&e.dataTransfer.files.length&&(E.files=e.dataTransfer.files,a(E.files[0]))}),E?.addEventListener("change",e=>{const t=e.target.files[0];t&&a(t)}),document.getElementById("btnClearUpload")?.addEventListener("click",()=>{E&&(E.value=""),b?.classList.add("hidden"),b&&(b.textContent="")});async function a(e){if(b){b.textContent="Lade hoch … "+e.name,b.classList.remove("hidden");try{const t=new FormData;t.append("file",e);const n=await fetch($,{method:"POST",body:t,credentials:"include"});if(!n.ok)throw new Error(`HTTP ${n.status}`);const s=await n.json(),d=s?.filename||s?.name||e.name;b.textContent=`Hochgeladen: ${d}`,window.__lastUploadId=s?.id||s?.fileId||s?.file_id}catch(t){b.textContent=`Upload fehlgeschlagen: ${String(t)}`}}}const r=document.getElementById("requirements"),P=document.getElementById("charCount");r?.addEventListener("input",()=>{P&&(P.textContent=r.value.length+" Zeichen")}),document.getElementById("btnInsertChecklist")?.addEventListener("click",()=>{const e=`• Beteiligte Parteien (Namen, Adressen)
• Wesentliche Bedingungen (z. B. Preis, Laufzeit)
• Besondere Anforderungen (z. B. Geheimhaltung, Vertragsstrafe)
• Fristen/Termine (konkretes Datum oder Zeitraum)`;r&&r.value.indexOf("Beteiligte Parteien")===-1&&(r.value=(r.value?r.value+`
`:"")+e),r?.dispatchEvent(new Event("input"))});const A=L("[data-clause]");Array.isArray(A)&&A.forEach(e=>e.addEventListener("click",()=>{if(!r)return;const t=e.getAttribute("data-clause");r.value+=`
• Klausel: `+t,r.dispatchEvent(new Event("input"))}));const B=te({storageKey:"docsTourDismissed"});B.setSteps([{sel:"#docType",text:"<b>Dokumenttyp</b><br/>Wählen oder benennen Sie den gewünschten Dokumenttyp."},{sel:"#requirements",text:"<b>Sachverhalt & Anforderungen</b><br/>Beschreiben Sie kurz den Fall und Vorgaben."},{sel:"#btnGenerate",text:"<b>Generieren</b><br/>Erstellt einen ersten Entwurf basierend auf Ihren Angaben."},{sel:"#previewContainer",text:"<b>Ergebnisbereich</b><br/>Hier erscheint das generierte Dokument mit Vorschau, Aktionen und Export."}]),B.attachDefaultHandlers(),document.getElementById("btnHelp")?.addEventListener("click",()=>B.startTour()),document.addEventListener("click",e=>{e.target instanceof Element&&e.target.closest("#btnHelp")&&(e.preventDefault?.(),B.startTour())},{capture:!0}),(async()=>{try{if(!w.templates)return;const e=await fetch(w.templates,{credentials:"include",headers:{...D()}});if(e.ok){const t=await e.json();Array.isArray(t)&&t.length&&(k=t.map(n=>({id:n.id||n.key||n.slug,title:n.name||n.title,category:n.category||n.type||"Allgemein",docType:n.type==="document"&&n.name||"Rechtsdokument",prompt:n.description||"",body:n.content||""})))}}catch{}})();const I=document.getElementById("tplModal");document.getElementById("btnTemplates")?.addEventListener("click",()=>{I?.classList.add("open"),R(k);const e=document.getElementById("tplSearch");e&&(e.value="")}),document.getElementById("tplClose")?.addEventListener("click",()=>I?.classList.remove("open")),document.getElementById("tplSearch")?.addEventListener("input",e=>{const t=e.target.value.toLowerCase(),n=k.filter(s=>(s.title+" "+s.category+" "+s.prompt).toLowerCase().includes(t));R(n)});const o=document.getElementById("preview"),g=document.getElementById("previewEmpty");document.getElementById("previewSkeleton");const T=document.getElementById("wordCount");async function M(){g?.classList.add("hidden"),o?.classList.add("hidden");const e=document.getElementById("genOverlay");e?.classList.remove("hidden");const t=document.getElementById("actionBar");t?.classList.add("hidden");let n=!1;const s=document.getElementById("docType")?.value||x?.docType||"Rechtsdokument",d=r?.value.trim()||"",v=document.getElementById("switchLegalTone")?.checked,p=document.getElementById("switchPlain")?.checked;try{const f=[l.generateSimple||(i?`${i}/ai/generate-document-simple`:""),l.generate||(i?`${i}/ai/generate-document`:"")].filter(Boolean);let c=null,ne=!1;for(const _ of f)try{const U=_.includes("generate-document-simple")?{title:s,document_type:s,instructions:d,tone:v?p?"legal+plain":"legal":p?"plain":"neutral",template_content:x?.body||"",template_id:x?.id||null,variables:{},model:null,uploadId:window.__lastUploadId||null}:{title:s,document_type:s,template_content:x?.body||"",variables:{},template_id:x?.id||null,model:null},F=await u(_,U);if(F.status===403){ne=!0;continue}if(F.ok){c=await F.json();break}}catch{}if(!c)throw new Error("Generate endpoint not configured");const z=c?.document||c,ee=z?.content||z?.html||z?.contentHtml||(z?.text?`<p>${z.text.replace(/\n/g,"<br/>")}</p>`:"");if(ee){const N=`<h2 style="margin:0">${s}</h2><hr/><p><em>${v?p?"Juristisch präzise – zugleich gut lesbar.":"Juristisch präzise Formulierung.":p?"Leicht verständliche Formulierung.":"Neutraler Stil."}</em></p>`,U=d?`<h3>Vorgaben</h3><p>${d.replace(/\n/g,"<br/>")}</p>`:"";H(N+ee+U),n=!0,t?.classList.remove("hidden"),t&&(t.style.display="flex")}}catch(f){console.error("Generate failed:",f),saw403&&alert("Nicht autorisiert (403). Bitte erneut anmelden oder Token prüfen.")}finally{n?(o?.classList.remove("hidden"),o&&(o.style.display=""),g?.classList.add("hidden")):(o?.classList.add("hidden"),o&&(o.style.display="none"),g?.classList.remove("hidden"),t?.classList.add("hidden"),t&&(t.style.display="none")),e?.classList.add("hidden");const f=o?.innerText.trim(),c=f?f.split(/[ \t\r\n]+/).filter(Boolean).length:0;T&&(T.textContent=c+" Wörter")}}const V=document.getElementById("btnGenerate");V&&V.addEventListener("click",M),document.addEventListener("keydown",e=>{(e.ctrlKey||e.metaKey)&&e.key==="Enter"&&M()});const O=document.getElementById("btnCopy");O&&O.addEventListener("click",async()=>{if(!o)return;const e=document.createElement("div");e.innerHTML=o.innerHTML;const t=e.innerText;await navigator.clipboard.writeText(t),alert("In Zwischenablage kopiert")});const K=document.getElementById("btnExport");K&&K.addEventListener("click",async()=>{if(!o)return alert("Nichts zu exportieren");try{if(!w.save)throw new Error("Save endpoint not configured");const e=l.save||(i?`${i}/documents/save`:""),t=await u(e,{title:document.getElementById("docType")?.value||"Rechtsdokument",html:o.innerHTML,uploadedFileId:window.__lastUploadId||null});if(!t.ok)throw new Error(`HTTP ${t.status}`);const n=await t.json(),s=n?.id||n?.documentId;if(window.__lastDocId=s,s){const v=`${l.exportBase||(i?`${i}/documents`:"")}/${s}/export?format=docx`,p=await h(v);if(!p.ok)throw new Error(`HTTP ${p.status}`);const f=await p.blob(),c=document.createElement("a");c.href=URL.createObjectURL(f),c.download=(document.getElementById("docType")?.value||"Dokument")+".docx",document.body.appendChild(c),c.click(),c.remove()}else alert("Gespeichert, aber keine ID erhalten.")}catch(e){alert("Export fehlgeschlagen: "+String(e))}});const Z=document.getElementById("btnExportPdf");Z&&Z.addEventListener("click",async()=>{if(!o)return alert("Nichts zu exportieren");try{if(!w.save)throw new Error("Save endpoint not configured");const e=l.save||(i?`${i}/documents/save`:""),t=await u(e,{title:document.getElementById("docType")?.value||"Rechtsdokument",html:o.innerHTML});if(!t.ok)throw new Error(`HTTP ${t.status}`);const n=await t.json(),s=n?.id||n?.documentId;window.__lastDocId=s;const d=l.exportBase||(i?`${i}/documents`:"");if(s&&d){const v=`${d}/${s}/export?format=pdf`,p=await h(v);if(!p.ok)throw new Error(`HTTP ${p.status}`);const f=await p.blob(),c=document.createElement("a");c.href=URL.createObjectURL(f),c.download=(document.getElementById("docType")?.value||"Dokument")+".pdf",document.body.appendChild(c),c.click(),c.remove()}}catch(e){alert("Export fehlgeschlagen: "+String(e))}});const W=document.getElementById("btnEdit"),q=document.getElementById("btnSave"),X=document.getElementById("btnApprove"),J=document.getElementById("btnReject"),Y=document.getElementById("btnAccept");W&&W.addEventListener("click",()=>{if(!o)return;const e=o.getAttribute("contenteditable")==="true";o.setAttribute("contenteditable",e?"false":"true"),o.classList.toggle("ring-2"),o.classList.toggle("ring-blue-400")}),q&&q.addEventListener("click",async()=>{if(o)try{if(!w.save)throw new Error("Save endpoint not configured");const e=await fetch(w.save,{method:"POST",headers:{"Content-Type":"application/json",...D()},credentials:"include",body:JSON.stringify({title:document.getElementById("docType")?.value||"Rechtsdokument",html:o.innerHTML})});if(!e.ok)throw new Error("HTTP "+e.status);const t=await e.json();window.__lastDocId=t?.id||t?.documentId,alert("Gespeichert")}catch(e){alert("Speichern fehlgeschlagen: "+String(e))}});async function G(e){try{if(!(l.status||i&&`${i}/documents/status`||l.exportBase||i&&`${i}/documents`))throw new Error("Status endpoint not configured");const t=window.__lastDocId;let n=l.status||(i?`${i}/documents/status`:"");if(!n&&t){const d=l.exportBase||(i?`${i}/documents`:"");d&&(n=`${d}/${t}/status`)}const s=await u(n,{status:e,doc_id:t||null});if(!s.ok)throw new Error("HTTP "+s.status);alert("Status: "+e)}catch(t){alert("Status Änderung fehlgeschlagen: "+String(t))}}X&&X.addEventListener("click",()=>G("approved")),J&&J.addEventListener("click",()=>G("rejected")),Y&&Y.addEventListener("click",()=>G("accepted"));const Q=document.getElementById("btnClear");Q&&Q.addEventListener("click",()=>{const e=document.getElementById("docType");e&&(e.value=""),r&&(r.value="",r.dispatchEvent(new Event("input"))),H(""),o?.classList.add("hidden"),g?.classList.remove("hidden"),x=null;try{localStorage.removeItem("anwalt.templateId")}catch{}document.getElementById("actionBar")?.classList.add("hidden")}),R(k);try{const e=document.getElementById("preview"),t=document.getElementById("previewEmpty"),n=document.getElementById("actionBar");e&&(e.innerHTML=""),e?.classList.add("hidden"),t?.classList.remove("hidden"),n?.classList.add("hidden")}catch{}}),(L,i)=>(ae(),ie("div",null,i[0]||(i[0]=[oe('<header class="px-6 py-4 bg-white border-b border-gray-200"><div class="max-w-7xl mx-auto flex items-center justify-between"><div class="flex items-center gap-3"><div class="icon-box"><svg class="w-5 h-5 icon" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg></div><div><h1 class="text-xl font-semibold text-gray-900">Rechtsdokument‑Assistent</h1><p class="text-xs text-gray-500">Erstellen, prüfen und perfektionieren – mit konsistenten Kanzlei‑Bausteinen.</p></div></div><div class="flex items-center gap-2"><a href="/dashboard" class="btn-secondary text-sm" title="Zurück zum Dashboard">Zurück</a><button id="btnHelp" class="toolbar-btn text-[color:var(--primary)]">Hilfe</button></div></div></header><main class="max-w-7xl mx-auto p-6"><div class="mb-4 grid grid-cols-1 md:grid-cols-3 gap-3"><div class="card flex items-center gap-3 py-3"><div class="icon-box"><svg class="w-5 h-5 icon" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115 7h1a3 3 0 010 6h-1"></path></svg></div><div><div class="text-sm font-medium">1. Dokument hochladen</div><div class="text-xs text-gray-500">Optional</div></div></div><div class="card flex items-center gap-3 py-3"><div class="icon-box"><svg class="w-5 h-5 icon" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 20l9-5-9-5-9 5 9 5z"></path></svg></div><div><div class="text-sm font-medium">2. Angaben &amp; Vorgaben</div><div class="text-xs text-gray-500">Pflichtfelder</div></div></div><div class="card flex items-center gap-3 py-3"><div class="icon-box"><svg class="w-5 h-5 icon" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4"></path></svg></div><div><div class="text-sm font-medium">3. Vorschau &amp; Feinschliff</div><div class="text-xs text-gray-500">Export bereit</div></div></div></div><div class="grid grid-cols-1 lg:grid-cols-2 gap-6"><section class="space-y-4"><div class="card" aria-label="Dokument hochladen"><div class="card-header"><div class="flex items-center gap-2"><div class="icon-box" aria-hidden="true"><svg class="w-5 h-5 icon" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1M12 12V4m0 0L8 8m4-4l4 4"></path></svg></div><h2 class="card-title">Dokument hochladen <span class="text-gray-400 text-sm">(optional)</span></h2></div><button class="btn-text text-sm" id="btnClearUpload">Zurücksetzen</button></div><div id="dropzone" class="dropzone"><div><div class="mx-auto icon-box mb-2" aria-hidden="true"><svg class="w-5 h-5 icon" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg></div><p class="text-sm text-gray-700"><span class="text-[color:var(--primary)]">Datei hier ablegen</span> oder klicken</p><p class="text-xs text-gray-500">PDF, DOC, DOCX, TXT</p></div><input id="fileInput" type="file" class="hidden" accept=".pdf,.doc,.docx,.txt"></div><div id="uploadInfo" class="hidden mt-3 text-sm text-gray-600"></div></div><div class="card" aria-label="KI‑Anweisungen"><div class="card-header"><div class="flex items-center gap-2"><div class="icon-box" aria-hidden="true"><svg class="w-5 h-5 icon" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 20l9-5-9-5-9 5 9 5z"></path></svg></div><h2 class="card-title">KI‑Anweisungen</h2></div><div class="flex items-center gap-3 text-xs text-gray-500"><label class="flex items-center gap-2"><span>Juristische Sprache</span><span class="switch"><input id="switchLegalTone" type="checkbox" checked><span class="dot"></span></span></label><label class="flex items-center gap-2"><span>Leichte Sprache</span><span class="switch"><input id="switchPlain" type="checkbox"><span class="dot"></span></span></label></div></div><label class="text-xs text-gray-500">Dokumenttyp</label><input id="docType" class="input-field mt-1" placeholder="z. B. Mietvertrag, Abmahnung, Vergleich, NDA…"><div class="mt-4"><div class="flex items-center justify-between"><label class="text-xs text-gray-500">Sachverhalt &amp; Anforderungen</label><button id="btnInsertChecklist" class="btn-text text-xs">Beispiel‑Checkliste einfügen</button></div><textarea id="requirements" class="input-field mt-1" rows="6" placeholder="Beschreiben Sie kurz den Fall. Nennen Sie Parteien, Ziele und besondere Bedingungen."></textarea><p class="text-xs text-gray-400 mt-1" id="charCount">0 Zeichen</p></div><div class="mt-4"><label class="text-xs text-gray-500">Optionale Bausteine</label><div class="mt-2 flex flex-wrap gap-2"><button class="chip" data-clause="Gerichtsstand">Gerichtsstand</button><button class="chip" data-clause="Vertragsstrafe">Vertragsstrafe</button><button class="chip" data-clause="Vertraulichkeit">Vertraulichkeit</button><button class="chip" data-clause="Kündigung">Kündigung</button><button class="chip" data-clause="Verjährung">Verjährung</button></div></div></div><div class="card"><div class="flex items-center justify-between"><div class="text-sm text-gray-600">Bereit, wenn Sie es sind. Sie können jederzeit neu generieren.</div><div class="flex items-center gap-3"><button id="btnTemplates" class="btn-secondary text-sm">Vorlagen</button><button id="btnClear" class="btn-secondary text-sm">Alle löschen</button><button id="btnGenerate" class="btn-primary text-sm">Dokument erstellen ⏎</button></div></div></div></section><section><div id="previewContainer" class="card" style="min-height:540px;"><div class="card-header"><div class="flex items-center gap-2"><div class="icon-box" aria-hidden="true"><svg class="w-5 h-5 icon" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 01-2 2z"></path></svg></div><h2 class="card-title">Dokument‑Vorschau</h2></div><div id="actionBar" class="flex items-center gap-2 text-sm flex-wrap hidden" style="display:none;"><span id="wordCount" class="text-gray-500 mr-2">0 Wörter</span><button class="toolbar-btn" id="btnCopy" title="In Zwischenablage kopieren"><svg class="w-4 h-4 inline mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2M8 16h8a2 2 0 002-2v-2m-6 6H8a2 2 0 01-2-2v-2m10-6h2"></path></svg> Kopieren </button><button class="toolbar-btn" id="btnEdit" title="Bearbeiten umschalten"><svg class="w-4 h-4 inline mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5h2m2 0h2m-8 0H7m0 0H5m2 0v2m0 2v2m0 2v2m0 2v2m2-2h2m2 0h2m2 0h2"></path></svg> Bearbeiten </button><button class="toolbar-btn" id="btnSave" title="Speichern"><svg class="w-4 h-4 inline mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7"></path></svg> Speichern </button><button class="toolbar-btn" id="btnApprove" title="Freigeben"><svg class="w-4 h-4 inline mr-1 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Freigeben </button><button class="toolbar-btn" id="btnReject" title="Ablehnen"><svg class="w-4 h-4 inline mr-1 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg> Ablehnen </button><button class="toolbar-btn" id="btnAccept" title="Annehmen"><svg class="w-4 h-4 inline mr-1 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4"></path></svg> Annehmen </button><button class="toolbar-btn" id="btnExport" title="Als DOCX exportieren"><svg class="w-4 h-4 inline mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v12m0 0l-4-4m4 4l4-4M4 20h16"></path></svg> DOCX </button><button class="toolbar-btn" id="btnExportPdf" title="Als PDF exportieren"><svg class="w-4 h-4 inline mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0l-4-4m4 4l-4 4"></path></svg> PDF </button></div></div><div id="previewArea" class="relative min-h-[420px]"><div id="previewEmpty" class="absolute inset-0 flex items-center justify-center text-center text-gray-500"><div><div class="mx-auto icon-box mb-3"><svg class="w-5 h-5 icon" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg></div><div class="font-medium text-gray-700">Noch kein Dokument erstellt</div><div class="text-xs">Laden Sie ein Dokument hoch oder geben Sie Anweisungen ein, um zu starten.</div></div></div><div id="previewSkeleton" class="hidden space-y-3 p-4"><div class="skeleton h-6"></div><div class="skeleton h-6 w-11/12"></div><div class="skeleton h-6 w-10/12"></div><div class="skeleton h-6 w-9/12"></div><div class="skeleton h-6 w-8/12"></div></div><div id="genOverlay" class="hidden absolute inset-0 bg-white/80 backdrop-blur-[1px] flex flex-col items-center justify-center rounded"><div class="w-16 h-16 rounded-full border-4 border-blue-200 border-t-[color:var(--primary)] animate-spin mb-3"></div><div class="text-sm text-gray-700">Anwalts AI in Aktion …</div></div><article id="preview" class="prose max-w-none hidden p-4"></article></div></div><div class="mt-3 text-xs text-gray-500">Tastatur: <kbd>Strg</kbd> + <kbd>Enter</kbd> generiert neu · <kbd>Alt</kbd> + <kbd>C</kbd> kopiert.</div></section></div></main><div id="tourOverlay" class="tour-overlay"></div><div id="tourStep" class="tour-step hidden"><div class="tour-arrow"></div><div id="tourContent" class="text-sm text-gray-800"></div><div class="mt-3 flex items-center justify-between"><div class="flex items-center gap-2"><button id="tourPrev" class="btn-secondary text-sm">Zurück</button><button id="tourNext" class="btn-primary text-sm">Weiter</button></div><button id="tourClose" class="text-sm text-gray-500">Schließen</button></div><button id="tourNever" class="mt-2 text-xs text-gray-500 underline">Nicht mehr zeigen</button></div><div id="tplModal" class="modal"><div class="card w-[820px] max-h-[80vh] overflow-auto"><div class="card-header"><h3 class="card-title">Vorlagen auswählen</h3><button class="toolbar-btn" id="tplClose">Schließen</button></div><div class="grid grid-cols-1 md:grid-cols-3 gap-4"><div class="md:col-span-2"><input id="tplSearch" class="input-field" placeholder="Vorlagen durchsuchen… (z. B. NDA, Klage, Abmahnung)"><div id="tplGrid" class="mt-3 grid grid-cols-1 md:grid-cols-2 gap-3"></div></div><aside class="hidden md:block text-sm text-gray-600"><div class="text-xs text-gray-500">Tipps</div><ul class="mt-2 list-disc pl-5"><li>Mit <em>Übernehmen</em> landet die Vorlage direkt in der Vorschau.</li><li>Platzhalter wie [PARTEI A] später ersetzen.</li><li>Ihre letzte Auswahl wird gespeichert.</li></ul></aside></div></div></div>',5)])))}};export{le as default};
